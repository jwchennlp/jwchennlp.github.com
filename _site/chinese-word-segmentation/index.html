<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Chinese Word Segmentation &#8211; My blog</title>
<meta name="description" content="good good study,day day up">
<meta name="keywords" content="HMM">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Chinese Word Segmentation">
<meta property="og:description" content="good good study,day day up">
<meta property="og:url" content="http://jwchennlp.github.com/chinese-word-segmentation/">
<meta property="og:site_name" content="My blog">





<link rel="canonical" href="http://jwchennlp.github.com/chinese-word-segmentation/">
<link href="http://jwchennlp.github.com/feed.xml" type="application/atom+xml" rel="alternate" title="My blog Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://jwchennlp.github.com/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://jwchennlp.github.com/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://jwchennlp.github.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://jwchennlp.github.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://jwchennlp.github.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://jwchennlp.github.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://jwchennlp.github.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://jwchennlp.github.com/images/apple-touch-icon-144x144-precomposed.png">





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
                  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
                          });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>
<!--
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
-->

</head>

<body id="post" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://jwchennlp.github.com">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://jwchennlp.github.com/images/avatar.jpg" alt="jwchen photo" class="author-photo">
					<h4>jwchen</h4>
					<p>不积跬步，无以至千里;不积小流，无以成江海</p>
				</li>
				<li><a href="http://jwchennlp.github.com/about/">Learn More</a></li>
				<li>
					<a href="mailto:hit1093710417@email.com"><i class="icon-envelope"></i> Email</a>
				</li>
				
				
				
				
				<li>
					<a href="http://github.com/jwchennlp"><i class="icon-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://jwchennlp.github.com/posts/">All Posts</a></li>
				<li><a href="http://jwchennlp.github.com/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="http://jwchennlp.github.com/theme-setup">Theme Setup</a></li><li><a href="http://mademistakes.com">External Link</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->



<div class="entry-header">
  <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
  <div class="entry-image">
    <img src="http://jwchennlp.github.com/images/abstract-8.jpg" alt="Chinese Word Segmentation">
  </div><!-- /.entry-image -->
</div><!-- /.entry-header -->


<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://jwchennlp.github.com/chinese-word-segmentation/" rel="bookmark" title="Chinese Word Segmentation">Chinese Word Segmentation</a></h1>
        
        <h2>June 08, 2014</h2>
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <h2 id="section">1.介绍</h2>
<hr />

<p>通过之前隐马尔可夫模型(HMM)的讲解及其适用问题的分析,对HMM应该有一个大致的认知.同时,我们知道HMM在很多领域都有运用.现在我们具体实现HMM在中文分词中的运用.		</p>

<p>中文分词 (Chinese Word Segmentation) 指的是将一个汉字序列切分成一个一个单独的词.我们知道,在英文中单词是以空格作为分割符的,而中文中每个字之间都是紧密挨着的,所以中文的分词则要显得困难很多.</p>

<p>当前的中文分词主要有一下3个方向:</p>

<p>1.基于规则的分词</p>

<p>也就是说可以按照某些规则规则去匹配句子中符合某一规范的词,较为常见为构造一个词典,在对句子遍历的过程中,查看词是否出现在句子中.按照扫描方法可以分为正向匹配和逆向匹配.按长度不同可以分为最大匹配和最小匹配.		</p>

<p>2.基于统计的分词 	</p>

<p>首先给出大量已经分好词的文本,利用统计机器学习模型学习词划分的规律,从而实现对未知文本的词划分.		</p>

<p>3.统计和规则相结合的分词</p>

<h2 id="section-1">2.实现</h2>
<hr />

<p>这里用到的是<a href="http://sighan.cs.uchicago.edu/bakeoff2005/">SIGHAN</a>里面的语料.</p>

<p>中文分词问题可以理解为,给定一个句子(S=$s_1s_2…s_n$),我们需要找出最有可能的一个分词策略.如北京市有关部门,理想的分词结果应该是”北京市/有关/部门”.这里需要考虑一个问题,如果采用HMM,未分词的句子是观察状态(O),则隐含状态(S)是什么呢?</p>

<p>这里我们定义隐含状态的4个类别State={B,E,M,S}:</p>

<p>B:一个词的开始	
E:一个词的结束		
M:一个词的中间		
S:单字成词		</p>

<p>这是北京市有关部门的分词结果可以表示为”BMEBEBE”.	</p>

<p>定义好隐含状态之后,我们发现对每个句子的最有可能的分词策略便是找出最可能的隐含状态序列,这是HMM中讲到的解码(decode)问题.	</p>

<p>HMM模型定义为一个五元组<script type="math/tex">\lambda=(S,O,\pi,a,b)</script>其中S为隐含状态集合,O为观察状态集合,$\pi$为隐含状态的初始概率,a为隐含状态的转移概率,b为在从隐含状态到观察状态的混淆概率(发射概率).现在要做的就是根据已经表述好的文本语料的出各参数的值.</p>

<script type="math/tex; mode=display">\pi=P(S)=[p(B),p(E),p(M),p(S)]</script>

<script type="math/tex; mode=display">a_{ij}=P(s_j｜s_i)=\frac{count(s_i,s_j)}{count(s_i)},1\leq i\leq N-1;N为隐状态长度</script>

<script type="math/tex; mode=display">b_{it}=p(o_t｜s_i)= \frac{count(s_i,o_t)}{count(s_i)},1\leq i\leq N;1\leq t\leq T,T为观察状态长度</script>

<p>对于已经分好词的预料,对于某一篇文档d={<script type="math/tex">o_1o_2,...,o_{n(d)}</script>},有相应的标注结果<script type="math/tex">s_1s_2,...,s_{n(d)}</script></p>

<p>根据文档信息和表标注息可以得出预料中某词$o_t$对应于隐状态$s_i$的次数,$count(o_t,s_i)$,当前词对于的隐状态为$s_i$,下一词对应隐状态$s_j$的次数,$count(s_i,s_j)$</p>

<p>由于文档开始的第一个词隐状态只能是B或者是S,所以只需要计算P(B)和P(S),$P(B)=\frac{count(B)}{count(B)+count(S)}$.</p>

<p>在计算隐含状态的转移概率时,B-B,B-S,E-E,E-M,M-B,M-S,S-E,S-M都为0,所以只需要计算剩下的8种组合.	</p>

<center><img src="../images/1406/hmm11.png" /></center>
<!--
|		|B 		|E 		|M 		|S 		|		
|:-----:|:-----:|:-----:|:-----:|:-----:|
|	B	|	0 	|		|		|	0	|
|	E	|		|	0	|	0	|		|
|	M	|	0	|		|		|	0	|
|	S	|		|	0	|	0	|		|	
-->

<p>由于b计算的是隐含状态-观察状态矩阵,首先我们的观察状态集合该如何定义呢?		</p>

<p>观察状态集合可以理解为字的集合,因为分好词的语料库很难包含所有的字,所以理想状态是用分好词的语料库和待分词的文档集合的所有字构成观察状态集,但是在计数($count(o_t,s_i)$)时只基于分好词的语料库技术.这样将导致那些只出现在待分词文档中的词的混淆概率为0,这样使得在viterbi算法过程中包含此词的句子的$\delta值0$,无法求得隐含序列.</p>

<p>对于这种情况,可以采用平滑技术进行处理,这里我们采用的是加1平滑,效果更好的可以采用<a href="http://zh.wikipedia.org/wiki/%E5%9B%BE%E7%81%B5%E4%BC%B0%E8%AE%A1">good-turing平滑</a>.所以:</p>

<script type="math/tex; mode=display">b_{it}=p(o_t｜s_i)= \frac{count(s_i,o_t)+1}{count(s_i)},1\leq i\leq N;1\leq t\leq T,T为观察状态长度</script>

<p>在计算好参数{$\pi,a,b$}之后,采用上节实现的viterbi算法求解.采用SIGHAN的评测标准,P=80.3%,R=78.6%,F_1=79.5%	</p>

<p>如下为部分句子的分词结果:</p>

<center><img src="../images/1406/hmm12.png" /></center>
<!--
|原始句子|分词结果|
|:-----:|:----:|
|中华人民共和国今天成立了|中华人民共和国/今天/成立/了|
|日理万机的周总理|日理/万机/的/周/总理|
|北京市|北京/市|
|北京市有关部门|北京/市有/关部门|
|北京有关部门|北京/有关/部门|
|改判被告人死刑立即执行|改判/被/告人/死/刑立/即/执行|
-->

<p>可以看出来,正常情况的分词效果还是比价理想的.不过当长词(北京市)及长词里面有短词时(北京),分类效果有时会倾向于分成短词,并在后续的分词结果中出错.</p>

<h2 id="section-2">4.注意的问题</h2>
<hr />

<p>正常情况下一个词的混淆概率$p(o_t｜s_i)$应该很小.在viterbi算法中t+1时刻位于隐含状态j的局部概率为:		</p>

<script type="math/tex; mode=display">\delta_t(j) = max_{i \in N}(\delta_{t-1}(i)a_{ij}b_{jo_t})</script>

<p>可以看出,当长度为N的观察序列的$\delta$值需要累乘N个混淆概率,这很容易使得$\delta$值为0. 这里我们可以用对数的方式来$\log\delta来替代\delta$或者对于一篇文档,我们可以按标点符号进行分割,计算每个分割后的子文档的隐含序列.最后将隐含序列进行累加即可.		</p>


      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://jwchennlp.github.com/tags/#HMM" title="Pages tagged HMM" class="tag">HMM</a></span>
        <span><a href="http://jwchennlp.github.com/chinese-word-segmentation/" rel="bookmark" title="Chinese Word Segmentation">Chinese Word Segmentation</a> was published on <span class="entry-date date published updated"><time datetime="2014-06-08T00:00:00-04:00">June 08, 2014</time></span></span>
        (revised: <span class="entry-date date modified"><time datetime="2014-06-08 06:52:56 UTC">06/08/2014</time></span>)
        <span class="author vcard"><span class="fn"><a href="http://jwchennlp.github.com/about/" title="About jwchen">jwchen</a></span></span>
        <div class="social-share">
          <ul class="socialcount socialcount-small inline-list">
            <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://jwchennlp.github.com/chinese-word-segmentation/" title="Share on Facebook"><span class="count"><i class="icon-facebook-sign"></i> Like</span></a></li>
            <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://jwchennlp.github.com/chinese-word-segmentation/" title="Share on Twitter"><span class="count"><i class="icon-twitter-sign"></i> Tweet</span></a></li>
            <li class="googleplus"><a href="https://plus.google.com/share?url=http://jwchennlp.github.com/chinese-word-segmentation/" title="Share on Google Plus"><span class="count"><i class="icon-google-plus-sign"></i> +1</span></a></li>
          </ul>
        </div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    
    <div class="read-more">
      
        <div class="read-more-header">
          <a href="http://jwchennlp.github.com/hmm-hidden-markov-model_140608165432/" class="read-more-btn">Read More</a>
        </div><!-- /.read-more-header -->
        <div class="read-more-content">
          <h3><a href="http://jwchennlp.github.com/hmm-hidden-markov-model_140608165432/" title="Hmm Hidden Markov Model_140608165432">Hmm Hidden Markov Model_140608165432</a></h3>
          <p>          2014-06-04-hmm-hidden-markov-model.md—/home/awen/blog/jwchennlp.github.com/_posts        body{font-family:Helvetica,arial,sans-...&hellip; <a href="http://jwchennlp.github.com/hmm-hidden-markov-model_140608165432/">Continue reading</a></p>
        </div><!-- /.read-more-content -->
      
      <div class="read-more-list">
        
          <div class="list-item">
            <h4><a href="http://jwchennlp.github.com/hmm-hidden-markov-model/" title="HMM(Hidden Markov Model)">HMM(Hidden Markov Model)</a></h4>
            <span>Published on June 04, 2014</span>
          </div><!-- /.list-item -->
        
          <div class="list-item">
            <h4><a href="http://jwchennlp.github.com/plsa/" title="pLSA">pLSA</a></h4>
            <span>Published on June 02, 2014</span>
          </div><!-- /.list-item -->
        
      </div><!-- /.read-more-list -->
      
    </div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2014 jwchen. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/hpstr/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://jwchennlp.github.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://jwchennlp.github.com/assets/js/scripts.min.js"></script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jwchennlp'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
